@page "/recipe/{Id:int}"
@using BlazorRecipes.Shared.Recipes
@using BlazorRecipes.Client.Services
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]
@inject IRecipeService RecipeService

@if (recipe == null)
{
    <Spinner />
}
else
{
    <h1>@recipe.Title</h1>

    <p>@recipe.Description</p>



    @recipe.Image

    @recipe.Details

    @recipe.Ingredients

    @recipe.Instructions
}

@code {
    private Recipe? recipe;
    
    [Parameter]
    public int? Id { get; set; }

    protected override async Task OnInitializedAsync()
    {
        if (Id == null)
        {
            throw new Exception($"'{nameof(Id)}' must not be null");
        }
        else
        {
            var id = (int)Id;
            recipe = await RecipeService.GetRecipeById(id);
        }
    }

}
